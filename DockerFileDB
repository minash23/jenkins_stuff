FROM eclipse-temurin:21-jdk-jammy
COPY target/XPSDB.jar /XPSDB.jar
COPY passwords.txt /passwords.txt
# Expose port
EXPOSE 9000
# Define DB_SERVER argument with no default
ARG DB_SERVER
ENV DB_SERVER=$DB_SERVER 
# Use ENTRYPOINT with CMD to allow for graceful handling
ENTRYPOINT ["java", "-jar", "/XPSDB.jar", "9000"]
# Default CMD args will be overridden if specified at runtime
CMD ["${DB_SERVER}", "/passwords.txt"]
